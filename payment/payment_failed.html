<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Failed - PMMA Examination</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" href="../imgs/PSI.png">

  <style>
    :root {
      --primary: #ef8809;
    }

    body {
      background: url('../imgs/bg.jpg') center center / cover no-repeat fixed;
    }

    .btn-primary {
      background-color: var(--primary);
      border-color: var(--primary);
      color: #000;
      font-weight: 600;
    }

    .btn-primary:hover {
      background-color:#b56401;
      border-color: #b56401;
      color: #ffffff;
    }

    .error-icon {
      font-size: 5rem;
      color: #dc3545;
    }
  </style>
</head>

<body class="min-vh-100 d-flex align-items-center justify-content-center">

<div class="position-fixed top-0 start-0 w-100 h-100"
     style="backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); z-index:0;"></div>

<div class="container position-relative" style="z-index:1;">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-6">

      <div class="card shadow-lg border-0 rounded-4 bg-white bg-opacity-75">
        <div class="card-body p-5 text-center">

          <!-- LOGOS -->
          <div class="d-flex justify-content-center align-items-center mb-4">
            <img src="../imgs/PSI.png" style="max-width:80px;">
            <div class="mx-3" style="width:1px;height:40px;background:#8f8f8f;"></div>
            <img src="../imgs/PMMA.png" style="max-width:80px;">
          </div>

          <!-- ERROR ICON -->
          <div class="mb-4">
            <i class="bi bi-x-circle error-icon"></i>
          </div>

          <!-- CONTENT -->
          <h3 class="fw-bold text-danger mb-3">Payment Failed</h3>
          
          <p class="text-muted mb-4">
            Unfortunately, your payment could not be processed. This may be due to:
          </p>

          <ul class="list-unstyled text-start mx-auto" style="max-width: 400px;">
            <li class="mb-2">
              <i class="bi bi-dash text-danger me-2"></i>
              Payment was cancelled
            </li>
            <li class="mb-2">
              <i class="bi bi-dash text-danger me-2"></i>
              Payment time expired
            </li>
            <li class="mb-2">
              <i class="bi bi-dash text-danger me-2"></i>
              Insufficient funds
            </li>
            <li class="mb-2">
              <i class="bi bi-dash text-danger me-2"></i>
              Network or technical error
            </li>
          </ul>

          <div class="alert alert-warning mt-4" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>
            <strong>Note:</strong> Your exam schedule is still reserved. You can try paying again.
          </div>

          <!-- ACTIONS -->
          <div class="d-flex gap-3 justify-content-center mt-4">
            <a href="payment.html" class="btn btn-primary px-4 rounded-pill">
              <i class="bi bi-arrow-clockwise me-1"></i>
              Try Again
            </a>
            
            <a href="landing.html" class="btn btn-outline-secondary px-4 rounded-pill">
              <i class="bi bi-house me-1"></i>
              Go to Home
            </a>
          </div>

          <p class="small text-muted mt-4 mb-0">
            Need help? Contact support at support@pmma.edu.ph
          </p>

        </div>
      </div>

    </div>
  </div>
</div>

<script>
// Check user session on page load
(function() {
    fetch('../php/check_session.php', {
        method: 'GET',
        credentials: 'same-origin'
    })
    .then(response => response.json())
    .then(data => {
        if (!data.authenticated) {
            // Redirect to login if not authenticated
            window.location.href = '../auth/login.html';
        }
    })
    .catch(error => {
        console.error('Session check failed:', error);
        window.location.href = '../auth/login.html';
    });
})();
</script>

</body>
</html>
