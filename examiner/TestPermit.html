<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="../imgs/PSI.png">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet">
	<link rel="stylesheet" href="../css/dashstyle.css">
  <link rel="stylesheet" href="../css/permitpdf.css">
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<title>Test Permit</title>
</head>
<body>
	<!-- Sidebar Section -->
		<section id="sidebar">
		<a href="#" class="brand" style="display: flex; align-items: center;">
			<img src="../imgs/PSI.png" alt="RHULogo" class="logo">
			<span class="text">PSI-PMMA Portal</span>
		</a>
		<ul class="side-menu top">
			<li>
				<a href="dashboard.html">
					<i class="bx bxs-dashboard"></i>
					<span class="text">Dashboard</span>
				</a>
			</li>

      <li class="active">
        <a href="accountsettings.html">
          <i class="bx bx-cog ms-1"></i>
          <span class="text">Account Settings</span>
        </a>
      </li>
		</ul>

		<ul class="side-menu">
<li>
  <a href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">
    <i class="bx bxs-log-out-circle"></i>
    <span class="text">Logout</span>
  </a>
</li>
</ul>
		
	</section>

	<section id="content">
		<nav>
      			<div class="greeting">
                <span>User</span>
            </div>
		</nav>

<!-- MAIN CONTENT -->
<main class="container py-3">

  <!-- PERMIT PDF AREA -->
  <div id="permitPDF" class="bg-white p-4 shadow-sm">

    <!-- HEADER -->
    <div class="text-center mb-4">
      <div class="d-flex justify-content-center align-items-center gap-5 mb-3">
        <img src="../imgs/PSI.png" style="max-height:80px">
        <div>
          <h6 class="fw-bold text-uppercase mb-1">PSY Systems and Innovation, OPC</h6>
          <div class="small text-muted text-uppercase">Philippine Merchant Marine Academy</div>
          <div class="small text-muted text-uppercase">Psychological Evaluation</div>
        </div>
        <img src="../imgs/PMMA.png" style="max-height:80px">
      </div>

      <h6 class="fw-bold text-uppercase mt-3">Test Permit</h6>
    </div>  

    <hr>

        <div class="text-center mb-4">
          <div class="qr-code-square-container">
            <img id="qrCode" src="../imgs/QR.png" alt="QR Code">
          </div>
        </div>

<!-- NOTE + PHOTO ROW -->
<div class="row align-items-start mb-3">

  


  <!-- NOTE (LEFT) -->
  <div class="col-8">
    <div class="permit-note">
      PLEASE BRING THIS TEST PERMIT ON EXAMINATION DAY.
    </div>
  </div>

  <!-- PHOTO (RIGHT) -->
<div class="col-4 d-flex justify-content-end">
  <div style="width:150px">
    <div class="border rounded ratio ratio-1x1 position-relative photo-box">
      <img class="img-fluid w-100 h-100 object-fit-cover" src="../imgs/avatar.png" alt="Examinee Photo">
    </div>
  </div>
</div>

</div>


    <!-- PERSONAL INFORMATION -->

    <h6 class="fw-bold text-uppercase border-bottom pb-2 mb-3">Personal Information</h6>

    <div class="row g-3 mb-4">
      <div class="col-md-6">
        <small class="text-muted">Test Permit No.</small>
        <div class="fw-semibold" id="testPermit">050-2018</div>
      </div>
      <div class="col-md-6">
        <small class="text-muted">Status</small>
        <div class="fw-semibold text-success" id="status">Detected</div>
      </div>
      <div class="col-md-6">
        <small class="text-muted">Name of Examinee</small>
        <div class="fw-semibold" id="fullName">User</div>
      </div>
      <div class="col-md-6">
        <small class="text-muted">Date of Birth</small>
        <div class="fw-semibold" id="dob">02/11/2026</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Age</small>
        <div class="fw-semibold" id="age">18</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Gender</small>
        <div class="fw-semibold" id="gender">Male</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Nationality</small>
        <div class="fw-semibold" id="nationality">Filipino</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Contact Number</small>
        <div class="fw-semibold" id="contact">09123456789</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Email Address</small>
        <div class="fw-semibold" id="email">example@gmail.com</div>
      </div>
    </div>

    <!-- SCHEDULE -->
    <h6 class="fw-bold text-uppercase border-bottom pb-2 mb-3">Schedule of Examination</h6>

    <div class="row g-3 mb-4">
      <div class="col-md-6">
        <small class="text-muted">Date of Testing</small>
        <div class="fw-semibold" id="dateOfTest">05/27/2025</div>
      </div>
      <div class="col-md-6">
        <small class="text-muted">Venue</small>
        <div class="fw-semibold" id="venue">Manila</div>
      </div>
    </div>

    <!-- PAYMENT -->
    <h6 class="fw-bold text-uppercase border-bottom pb-2 mb-3">Payment Details</h6>

    <div class="row g-3 mb-4">
      <div class="col-md-4">
        <small class="text-muted">Transaction No.</small>
        <div class="fw-semibold" id="transactionNo">123456789</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Payment Date</small>
        <div class="fw-semibold" id="paymentDate">02/11/2026</div>
      </div>
      <div class="col-md-4">
        <small class="text-muted">Amount</small>
        <div class="fw-semibold" id="amount">₱100.00</div>
      </div>
    </div>

    <!-- GUIDELINES -->
    <h6 class="fw-bold text-uppercase border-bottom pb-2 mb-3">Guidelines</h6>

    <ol class="small text-muted">
      <li><strong>Examination fees are non-refundable under any circumstances.</strong></li>
      <li>Attach 2×2 ID picture with name tag in white background.</li>
      <li>Wear white shirt, maong pants, and rubber shoes on examination day.</li>
      <li>Bring a valid ID for verification purposes.</li>
      <li>Bring 2 pencils, eraser, sharpener.</li>
      <li>Bring snacks (to be consumed outside the testing room).</li>
      <li>Cellphones, smartwatches, and other electronic devices are strictly prohibited within the testing room.</li>
    </ol>

    <!-- PRINT-ONLY SIGNATURE -->
<div class="print-signature mt-4 d-none">
  <p class="fst-italic mb-4">Verified by:</p>

  <div style="margin-top:40px; width:260px;">
    <div style="border-bottom:1px solid #000; height:30px;"></div>
    <div class="small text-center mt-1">
      Signature over Printed Name
    </div>
    <div class="small fst-italic text-center mt-1">
      (to be filled by the official representative of PSI)
    </div>
  </div>
</div>

  </div>

<div class="d-flex justify-content-center mt-4">
  <button id="generatePDF" class="btn btn-danger px-4 py-2">
    <i class="bx bx-download me-2"></i>
    Generate PDF
  </button>
</div>

</main>

<!-- Logout Confirmation Modal -->
<div
  class="modal fade"
  id="logoutModal"
  tabindex="-1"
  aria-labelledby="logoutModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered logout-modal">
    <div class="modal-content border-0 rounded-4 shadow">

      <!-- Header -->
      <div class="modal-header bg-light border-0 rounded-top-4 px-4 py-3">
        <h5 class="modal-title fw-bold mb-0" id="logoutModalLabel">
          Confirm Logout
        </h5>
        <button
          type="button"
          class="btn-close no-focus"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <!-- Divider -->
      <div class="px-4">
        <hr class="my-0">
      </div>

      <!-- Body -->
      <div class="modal-body px-4 py-4 text-center">
        <i class="bx bx-log-out-circle fs-1 text-muted mb-3"></i>
        <p class="mb-0 text-muted">
          Are you sure you want to log out of your account?
        </p>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-0 px-4 pb-4 pt-2 justify-content-center">
        <button
          type="button"
          class="btn btn-outline-secondary rounded-pill px-4"
          data-bs-dismiss="modal"
        >
          Cancel
        </button>
        <a
          href="../php/logout.php"
          class="btn btn-danger rounded-pill px-4"
        >
          Logout
        </a>
      </div>

    </div>
  </div>
</div>


<!-- SCRIPTS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="js/testPermit.js"></script>
<script>

document.getElementById('generatePDF').addEventListener('click', async () => {
  const permit = document.getElementById('permitPDF');

  document.body.classList.add('print-mode');

  await html2pdf().set({
    margin: 0,
    filename: 'PMMA_Test_Permit.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: {
      scale: 2,
      useCORS: true,
      scrollY: 0
    },
    jsPDF: {
      unit: 'in',
      format: 'letter',    
      orientation: 'portrait'
    },
    pagebreak: { mode: ['avoid-all'] }
  }).from(permit).save();

  document.body.classList.remove('print-mode');
});

</script>

</body>
</html>

